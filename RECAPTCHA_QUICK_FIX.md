# üöÄ QUICK FIX –¥–ª—è reCAPTCHA –æ—à–∏–±–∫–∏ –Ω–∞ production

## –ü—Ä–æ–±–ª–µ–º–∞ –Ω–∞ —Å–∞–π—Ç–µ
```
Form Error: –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.
API Response: 400 Bad Request
```

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ
1. –°–Ω–∏–∑–∏–ª–∏ reCAPTCHA score threshold —Å **0.5** –Ω–∞ **0.3** 
2. –î–æ–±–∞–≤–∏–ª–∏ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
3. –£–ª—É—á—à–∏–ª–∏ error messages

## üìã –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
```bash
cd /path/to/production
tail -f logs/django.log | grep "reCAPTCHA"
```

–ò—â–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏:
```
üîç reCAPTCHA Score Check: 0.15 >= 0.3  (score —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∏–π)
‚úÖ reCAPTCHA passed: score=0.85         (–≤—Å—ë –Ω–æ—Ä–º–∞–ª—å–Ω–æ)
üö´ reCAPTCHA failed for contact form   (–æ—Ç–∫–ª–æ–Ω–µ–Ω–æ)
```

### –®–∞–≥ 2: –ï—Å–ª–∏ score –Ω–∏–∑–∫–∏–π (< 0.3)
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` –∏ —Å–Ω–∏–∑—å—Ç–µ –ø–æ—Ä–æ–≥:
```env
RECAPTCHA_SCORE_THRESHOLD=0.2
```

–ü–æ—Ç–æ–º –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ staging –ø–µ—Ä–µ–¥ production

```bash
# –û—Ç–∫–ª—é—á–∏—Ç—å reCAPTCHA –≤—Ä–µ–º–µ–Ω–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
RECAPTCHA_ENABLED=False

# –ò–ª–∏ —Å–Ω–∏–∑–∏—Ç—å –ø–æ—Ä–æ–≥
RECAPTCHA_SCORE_THRESHOLD=0.1
```

## üîß –§–∞–π–ª—ã –¥–ª—è –æ—Ç–∫–∞—Ç–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è:
```bash
git log --oneline | head -5  # –ù–∞–π—Ç–∏ –∫–æ–º–º–∏—Ç
git revert <commit-hash>      # –û—Ç–∫–∞—Ç–∏—Ç—å
```

–ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `main/utils/recaptcha.py` - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ—Ä–æ–≥
- `main/views.py` - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ 3 ViewSet'–∞—Ö

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ 

–ü–æ—Å–ª–µ fix'–∞ –º–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ:
1. –£—Å–ø–µ—à–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º (200 response)
2. –õ–æ–≥–∏ reCAPTCHA score'–æ–≤
3. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ rejected requests

---

**–°–æ–∑–¥–∞–Ω–æ:** 7 —è–Ω–≤–∞—Ä—è 2026
**–í–µ—Ä—Å–∏—è:** 1.0
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–æ –Ω–∞ production
